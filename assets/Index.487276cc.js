import{u as ce,a as me,c as z,r as w,o,b as $,w as y,d as s,t as a,e as r,f as L,g as m,h as l,i as D,F as M,j as f,k as we,n as ze,N as Qe,l as je,m as qe,p as Je,q as F,s as Ke,T as C,B as J,v as re,x as K,y as Xe,z as de,D as Ye,E as Ze,A as et,C as tt,G as nt}from"./index.1dd67848.js";import{_ as ee,T as Te,f as pe,c as st,s as ke,g as be}from"./TokenIcon.cc4dd1ac.js";import{_ as k,d as at}from"./dayjs.min.a5607947.js";const lt={class:"transfer-confirm-popup"},ot={class:"title"},it={class:"transfer-detail"},ut={class:"item"},rt={class:"title-left"},dt={class:"content-left"},ct={key:0,class:"item"},mt={class:"title-left"},pt={class:"content-left"},vt={key:1,class:"item"},ft={class:"title-left"},yt={class:"content-left"},ht={class:"item"},gt={class:"title-left"},_t={class:"content-left"},kt={class:"item"},bt={class:"title-left"},$t={class:"content-left"},wt={class:"item"},Tt={class:"title-left"},Ct={class:"content-left"},St={class:"item"},At={class:"title-left"},Rt={class:"content-left"},Lt={class:"item"},Bt={class:"title-left"},It={class:"content-left"},Ft={key:0,style:{color:"#f6465d","margin-left":"4px"}};const xt={class:"btn"},Et={__name:"TransferConfirm",props:{visable:{type:Boolean,default:!1},detail:{type:Object,default:{receiptTotalAmount:0,sentListQty:0,sentRate:0,gas:0,serviceFee:0,token:{symbol:"",address:"",amount:0,icon:""},balance:0,isCustomRule:!1,sentRuleType:0,sentAmount:0,realSentTotalAmount:0}}},emits:["update:visable","confirm"],setup(d,{emit:x}){const e=d,u=ce(),{t:_}=me(),A=z(()=>{if(e.detail){if(e.detail.isCustomRule)return _("customRule");if(e.detail.sentRuleType==0)return`${e.detail.sentAmount} ${e.detail.token.symbol}/${_("address")}`;if(e.detail.sentRuleType==1)return _("dividedEqually",{amount:e.detail.sentAmount,symbol:e.detail.token.symbol})}return""});function R(){x("update:visable",!1)}return(p,S)=>{const b=w("van-notice-bar"),G=w("van-button"),W=w("van-popup");return o(),$(W,{show:d.visable,"close-on-click-overlay":!1,round:"",position:"bottom",closeable:"",onClose:R},{default:y(()=>[s("div",lt,[s("div",ot,a(p.$t("multiTransferConfirm")),1),s("div",it,[s("div",ut,[s("div",rt,a(p.$t("operationToken")),1),s("div",dt,[r(Te,{class:"token-icon",tokenIcon:d.detail.token.icon},null,8,["tokenIcon"]),L(" "+a(d.detail.token.symbol),1)])]),d.detail.sentRuleType==0?(o(),m("div",ct,[s("div",mt,a(p.$t("amountEach")),1),s("div",pt,a(l(A)),1)])):(o(),m("div",vt,[s("div",ft,a(p.$t("totalQuantity")),1),s("div",yt,a(l(A)),1)])),s("div",ht,[s("div",gt,a(p.$t("countOfAddress")),1),s("div",_t,a(d.detail.sentListQty),1)]),s("div",kt,[s("div",bt,a(p.$t("totalAmountOfTransfer")),1),s("div",$t,a(`${d.detail.realSentTotalAmount} ${d.detail.token.symbol}`),1)]),s("div",wt,[s("div",Tt,a(p.$t("serviceFee")),1),s("div",Ct,a(`${d.detail.serviceFee} ${l(u).chainCoinSymbol}`),1)]),s("div",St,[s("div",At,a(p.$t("estimateGas")),1),s("div",Rt,a(`${d.detail.gas} ${l(u).chainCoinSymbol}`),1)]),s("div",Lt,[s("div",Bt,a(p.$t("totalAmountOfReceived")),1),s("div",It,[L(a(`${d.detail.receiptTotalAmount} ${d.detail.token.symbol}`),1),d.detail.sentRate!=0?(o(),m("span",Ft,"( "+a(p.$t("expended",{percentage:d.detail.sentRate*100}))+")",1)):D("",!0)])])]),D("",!0),s("div",xt,[r(G,{class:"confirm-btn",type:"primary",onClick:S[0]||(S[0]=ve=>x("confirm"))},{default:y(()=>[L(a(p.$t("confirmSend")),1)]),_:1})])])]),_:1},8,["show"])}}},Nt=ee(Et,[["__scopeId","data-v-c6c6ace0"]]);const Mt={class:"title"},Vt={class:"body"},Dt={class:"status-text"},Wt={key:0},Gt={key:1},Ot={key:2},Pt={key:3},Ut={class:"status-icon"},Ht={class:"tx"},zt={key:1,class:"trade-hash"},Qt={__name:"ChainTrade",props:{tradeVisable:{type:Boolean,default:!1},status:{type:Number,default:0},tradeHash:{type:String,default:""},message:{type:String,default:""}},emits:["update:tradeVisable"],setup(d,{emit:x}){return(e,u)=>{const _=w("van-loading"),A=w("van-icon"),R=w("van-popup");return o(),$(R,{class:"dialog",show:d.tradeVisable,round:"","close-on-click-overlay":!1,onClose:u[1]||(u[1]=p=>x("update:tradeVisable"))},{default:y(()=>[s("div",Mt,a(e.$t("transactionDetails")),1),s("div",Vt,[s("div",Dt,[d.status!=0?(o(),m(M,{key:0},[d.status==1?(o(),m("div",Wt,a(e.$t("sendingTransactionToBlockchain")),1)):d.status==2?(o(),m("div",Gt,a(e.$t("waitingForServiceSyncronizing")),1)):d.status==-1?(o(),m("div",Ot,a(d.message?d.message:e.$t("sendTransactionToBlockchainFailed")),1)):d.status==-2?(o(),m("div",Pt,a(e.$t("servicesyncronizingTimeout")),1)):D("",!0)],64)):D("",!0)]),s("div",Ut,[d.status==1||d.status==2?(o(),$(_,{key:0,type:"spinner",size:"48px"})):d.status==0?(o(),$(A,{key:1,color:"#07c160",size:"40px",name:"checked"})):d.status==-1||d.status==-2?(o(),$(A,{key:2,color:"#FA5151",size:"40px",name:"clear"})):D("",!0)]),d.tradeHash?(o(),m("div",{key:0,class:"trade-hash",onClick:u[0]||(u[0]=p=>l(st)(d.tradeHash))},[L(a(e.$t("txHash"))+": ",1),s("span",Ht,a(l(pe)(d.tradeHash)),1),r(k,{name:"copy"})])):(o(),m("div",zt,a(e.$t("txHash"))+": N/A",1))])]),_:1},8,["show"])}}},jt=ee(Qt,[["__scopeId","data-v-a3a59357"]]),qt=[{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_operator",type:"address"},{indexed:!1,internalType:"uint256",name:"_arrayLimit",type:"uint256"}],name:"ArrayLimitChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_operator",type:"address"},{indexed:!1,internalType:"uint256",name:"_baseFee",type:"uint256"}],name:"BaseFeeChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_token",type:"address"},{indexed:!1,internalType:"address",name:"_sourceAccount",type:"address"},{indexed:!1,internalType:"uint256",name:"_targetAccountCount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_totalAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_totalRealAmount",type:"uint256"}],name:"Sent",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_operator",type:"address"},{indexed:!1,internalType:"address",name:"_addr",type:"address"}],name:"WhiteListAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_operator",type:"address"},{indexed:!1,internalType:"address",name:"_addr",type:"address"}],name:"WhiteListRemoved",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"addFeeWhiteList",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"arrayLimit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"feeWhiteList",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_arrayLimit",type:"uint256"},{internalType:"uint256",name:"_baseFee",type:"uint256"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"isInWhiteList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"address[]",name:"_accounts",type:"address[]"},{internalType:"uint256[]",name:"_amounts",type:"uint256[]"}],name:"multiSend",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"removeFeeWhiteList",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_arrayLimit",type:"uint256"}],name:"setArrayLimit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_baseFee",type:"uint256"}],name:"setBaseFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address payable",name:"recipient",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];const Jt={class:"left"},Kt={key:0,class:"address"},Xt={class:"address-text"},Yt={key:1,class:"address"},Zt={style:{"margin-left":"4px"}},en={class:"dapp-list"},tn=["onClick"],nn={class:"name"},sn={key:0,class:"tips"},an={__name:"Menu",props:{dappList:{type:Array,default:[]}},setup(d){const x=d,{t:e}=me(),u=ce(),_=f(!1);function A(R){if(!R){Qe(e("menuComingSoon"));return}window.open(R)}return(R,p)=>{const S=w("van-popup");return o(),m(M,null,[s("div",{onClick:p[0]||(p[0]=b=>_.value=!0)},[r(k,{class:"icon",name:"menu"})]),r(S,{show:_.value,"onUpdate:show":p[1]||(p[1]=b=>_.value=b),position:"left",style:{width:"48%",height:"100%"},class:"menu"},{default:y(()=>[s("div",Jt,[r(k,{class:"icon",name:"menu"}),l(u).isConnectWallet?(o(),m("div",Kt,[r(k,{class:"chain-icon",name:"wallet"}),s("div",Xt,a(l(pe)(l(u).walletAddress)),1)])):(o(),m("div",Yt,[r(k,{name:"wallet"}),s("div",Zt,a(l(e)("menuNoConnet")),1)]))]),s("ul",en,[(o(!0),m(M,null,we(x.dappList,b=>(o(),m("li",{class:ze(["dapp-list-item",b.selected?"dapp-list-item-selected":""]),onClick:G=>A(b.url)},[r(k,{class:"svg-icon",name:b.iconGrey},null,8,["name"]),s("div",nn,a(l(e)(b.name)),1),b.url?D("",!0):(o(),m("div",sn,a(l(e)("menuComingSoon")),1))],10,tn))),256))])]),_:1},8,["show"])],64)}}},ln=ee(an,[["__scopeId","data-v-840e18ac"]]),$e=[{name:"menuCreateToken",iconBlue:"createTokenBlue",iconGrey:"createTokenGrey",url:"https://avetokencreate.github.io/"},{name:"menuPresell",iconBlue:"presaleBlue",iconGrey:"presaleGrey",url:""},{name:"menuLiquidity",iconBlue:"liquidityBlue",iconGrey:"liquidityGrey",url:"https://m.jfliquidity.xyz/add?utm_source=ave.ai"},{name:"menuLock",iconBlue:"lockBlue",iconGrey:"lockGrey",url:"https://avetokenlock.github.io/"},{name:"menuMultitransfer",iconBlue:"multitransferBlue",iconGrey:"multitransferGrey",url:"https://avemultitransfer.github.io/"},{name:"menuRedPacket",iconBlue:"redPacketBlue",iconGrey:"redPacketGrey",url:"https://aeredpacket.github.io/"},{name:"menuApprove",iconBlue:"approveBlue",iconGrey:"approveGrey",url:"https://aveapprovecheck.github.io/"}];const on={class:"body"},un={class:"tools-bar"},rn={class:"left"},dn={class:"address-text"},cn={style:{"margin-left":"4px"}},mn={class:"tools"},pn={class:"token-title"},vn={class:"token-box"},fn={class:"token-amount"},yn={class:"form-item address-ipt"},hn={class:"title"},gn={class:"index"},_n={class:"content"},kn=["onClick"],bn={class:"form-item create"},$n={class:"field"},wn={class:"content"},Tn={class:"content"},Cn={class:"transfer-icon"},Sn={class:"title"},An={class:"transfer-icon"},Rn={class:"title"},Ln={class:"text"},Bn={class:"btn"},In={class:"content"},Fn={class:"title"},xn={class:"content"},En={__name:"Index",setup(d){const x=je(),e=ce(),{t:u}=me(),_=qe("global"),A=f(!1),R=f(!1),p=f(!1),S=f(!1),b=f(!1),G=f(!1),W=f(""),ve=z(()=>[{name:u("languages.zh-cn"),value:"zh-cn",color:e.language==="zh-cn"?"#9505F9":"#323233"},{name:u("languages.en"),value:"en",color:e.language==="en"?"#9505F9":"#323233"}]);function Ce(t){e.setLanguage(t.value)}const E=f(!1),O=f(0),P=f(""),Q=f("");async function fe(){await e.connectWallet(),await te()}function ye(t){const n=_.cfg.allowChainList.find(h=>h.chainId==t);let c;return n?c=n.chain:c=null,c}function he(){return _.cfg.allowChainList.map(n=>n.chainId).includes(e.chainId)?!0:(G.value=!0,!1)}async function Se(){E.value=!1,P.value="",O.value=1,E.value=!0;try{let t=await F.wallet.approveMaxAmount(e.token.address,e.multiSenderContractAddress);console.log(t),P.value=t.hash,await t.wait(),U.value=!1,O.value=0}catch(t){console.log(t),O.value=-1,await ke(2e3)}finally{E.value=!1}}async function te(){if(e.token==null)return;if(e.token.address==F.wallet.MAIN_COIN_ADDRESS){U.value=!1;return}const t=await F.wallet.isAllowanceEnough(e.multiSenderContractAddress,e.token.address,e.walletAddress);console.log("checkAllowance: "+t),t?U.value=!1:U.value=!0}function Ae(){x.push("/selectToken")}const ne=f(!1),ge=f(null);function Re(){ne.value=!0,Ke(()=>{ge.value.focus()})}const T=f(null);function Le(t){console.log("addressTextInput"),console.log(t);const n=/^0x[0-9a-fA-F]{40}(,\d*\.?\d+)?$/;let c=!1,h=t.replace(/\s+/gi," ").trim();if(h){let v=h.split(" ");if(v.length>500){C.fail(u("supportMax"));return}h.indexOf(",")>-1&&(c=!0);for(let g=0;g<v.length;g++){if(!n.test(v[g])){C.fail(u("pleaseEnterRightFormat"));return}c==!0&&v[g].indexOf(",")==-1&&(v[g]=v[g]+",0")}e.addressList=v,e.addressText=v.join(" ")}else e.addressList=[],e.addressText="";e.isCustomRule=c}const X=f(!1),se=f(0),Y=f("");function Be(t,n){const[c,h]=t.split(",");se.value=n,X.value=!0,Y.value=h}function Ie(){const[t,n]=e.addressList[se.value].split(",");e.addressList[se.value]=`${t},${Y.value}`,e.addressText=e.addressList.join(" "),X.value=!1}const ae=z(()=>e.isCustomRule?u("customRule"):e.currentSentRule.value==0?u("eachAddressEqual"):e.currentSentRule.value==1?u("dividedEquallyByTotal"):""),Fe=z(()=>[{name:u("eachAddressEqual"),value:0,color:e.currentSentRule.value===0?"#3F80F7":"#323233"},{name:u("dividedEquallyByTotal"),value:1,color:e.currentSentRule.value===1?"#3F80F7":"#323233"}]);function le(t){return console.log(t),t&&t.replace("-","").replace(/^(.*\..{6}).*$/,"$1")}const oe=f(!1);function xe(){e.isCustomRule||(oe.value=!0)}function Ee(t){e.currentSentRule.value=t.value,e.currentSentRule.name=t.name}function Ne(){e.addressList=[],e.addressText="",e.isCustomRule=!1}const U=f(!1),ie=f(!1),V=z(()=>{let t=J(0);for(let n of Z.value)t=t.plus(n.amount);return t.toNumber()});async function Me(){ie.value=!0;try{if(!e.token){C.fail(u("pleaseSelectToken"));return}if(e.addressList.length==0){C.fail(u("pleaseEnterReceivingAddress"));return}if(!e.isCustomRule){if(e.currentSentRule.value==0){if(!e.sentSingleAmountString){C.fail(u("pleaseEnterSingleQuantity"));return}}else if(e.currentSentRule.value==1&&!e.sentTotalAmountString){C.fail(u("pleaseEnterTotalQuantity"));return}}if(await e.connectWallet(),!he())return;let n=_.cfg.allowChainList.find(c=>c.chain==e.token.chain);if(!n){C.fail(u("tokenChainNotSupport"));return}if(e.chainId!=n.chainId){C.fail(u("switchTokenChain"));return}if(J(V.value).gt(J(W.value))){C.fail(u("balanceSlow"));return}if(await te(),U.value){C.fail(u("approveFirst"));return}await Ve(),p.value=!0}catch(t){console.dir(t)}finally{ie.value=!1}}async function Ve(){const t=F.wallet.getEthersProvider(),n=F.wallet.contractByProvider(t,e.multiSenderContractAddress,qt),c=Z.value.map(I=>I.address),h=Z.value.map(I=>re(I.amount.toString(),e.token.decimals).toString());let v=await n.baseFee();if(console.log("baseFee"),console.log(v),console.log(v.toString()),console.log(K(v)),e.token.chain=="bsc"){const I=await n.isInWhiteList(e.walletAddress);console.log("isInWhiteList",I),I&&(v=Xe.from(0))}let g=v;e.token.address==F.wallet.MAIN_COIN_ADDRESS&&(g=v.add(re(V.value.toString(),e.token.decimals)));const H=await t.getGasPrice();let B;try{B=(await n.estimateGas.multiSend(e.token.address,c,h,{value:g.toString()})).mul(2)}catch(I){throw I.data.code==-32e3&&C.fail(u("balanceSlow")),console.dir(I),I}console.log("gasLimit"),console.dir(B),console.log(K(B.mul(H))),console.log(e.token.address),console.log(c),console.log(h),console.dir(n);const N=await n.callStatic.multiSend(e.token.address,c,h,{value:g.toString()});console.dir(N),console.log(de(N,e.token.decimals));const i=de(N,e.token.decimals);let j=0;i<V&&(j=Number(J(V.value).minus(i).div(V.value).toFixed(4)));let q=0;e.isCustomRule?q=0:e.currentSentRule.value==0?q=e.sentSingleAmountString?Number(e.sentSingleAmountString):0:e.currentSentRule.value==1&&(q=e.sentTotalAmountString?Number(e.sentTotalAmountString):0),T.value={msContract:n,receiptTotalAmount:i,sentAddressList:c,sentAmountList:h,sentListQty:Z.value.length,baseFee:v,transferValue:g,gasLimit:B,sentRate:j,gas:K(B.mul(H)),serviceFee:K(v),token:{symbol:e.token.symbol,address:e.token.address,amount:e.token.amount,icon:e.token.icon,decimals:e.token.decimals,chain:e.token.chain},isCustomRule:e.isCustomRule,sentRuleType:e.currentSentRule.value,sentAmount:q,realSentTotalAmount:V.value,walletAddress:e.walletAddress}}async function De(){console.log("multiTransferConfirm"),O.value=1,E.value=!0;try{const t=await T.value.msContract.multiSend(T.value.token.address,T.value.sentAddressList,T.value.sentAmountList,{value:T.value.transferValue.toString(),gasLimit:T.value.gasLimit.toString()});console.dir(t),P.value=t.hash;const n=await t.wait();console.dir(n);const c=n.transactionHash;if(P.value=c,console.log("txHash: "+c),n.status!=1){await F.multiSend.sendMultiSendFailTx(T.value.token.chain,c),E.value=!1,Q.value="",b.value=!1,S.value=!0;return}else{E.value=!1,Q.value="",b.value=!0,S.value=!0;let h={receiverCount:0,sendAmount:re(V.value.toString(),e.token.decimals).toString(),sendTime:at().unix(),sender:T.value.walletAddress,status:-1,tokenAddress:T.value.token.address,tokenDecimal:T.value.token.decimals,tokenSymbol:T.value.token.symbol,txHash:c};console.dir(h),e.transferringList.push(h)}}catch(t){console.dir(t),t.code=="ACTION_REJECTED"&&(Q.value=u("actionRejected"),O.value=-1,await ke(1e3)),E.value=!1,Q.value="",b.value=!1,S.value=!0;return}finally{p.value=!1}}const Z=z(()=>{if(e.addressList.length>0){if(e.isCustomRule)return e.addressList.map(t=>{const[n,c]=t.split(",");return{address:n,amount:Number(c)}});if(e.currentSentRule.value==0){const t=e.sentSingleAmountString?Number(e.sentSingleAmountString):0;return e.addressList.map(n=>({address:n,amount:t}))}else if(e.currentSentRule.value==1){const t=e.sentTotalAmountString?Number(e.sentTotalAmountString):0,n=J(t).div(e.addressList.length).dp(2).toNumber();return e.addressList.map(c=>({address:c,amount:n}))}}return[]}),_e=_.cfg.allowChainList.map(t=>t.chain.toUpperCase()),ue=f(!1);function We(){Ye.confirm({title:u("tips"),message:u("disonnectWallet"),confirmButtonText:u("confirm"),cancelButtonText:u("cancel")}).then(()=>{e.disconnectWallet()}).catch(()=>{})}function Ge(t){let n=_.cfg.allowChainList.find(c=>c.chainId==e.chainId);n?window.open(n.txNetwork+t,"_blank"):C(u("unsupportedNetwork"))}function Oe(t){console.log("onPasteCapture"),t.target.value=t.target.value+t.clipboardData.getData("text"),t.target.blur()}function Pe(t){console.log("onBlurCapture"),console.log(t.target.value),Le(t.target.value),ne.value=!1}async function Ue(){if(!e.token)return;const t=C.loading({message:"Loading...",forbidClick:!0,duration:0});try{const n=F.wallet.getEthersProvider();if(e.token.address==F.wallet.MAIN_COIN_ADDRESS){const c=await n.getBalance(e.walletAddress);W.value=K(c)}else{const c=F.wallet.contractByProvider(n,e.token.address,Ze),h=await c.decimals(),v=await c.balanceOf(e.walletAddress);W.value=de(v,h)}}catch(n){console.log(n),e.token=null}finally{t.close()}}$e.forEach(t=>t.selected=t.name=="menuMultitransfer");const He=f($e);return Je(()=>{console.log("index onMounted"),e.chainId>0&&he()&&e.token&&(te(),Ue())}),(t,n)=>{const c=w("van-image"),h=w("van-cell"),v=w("van-cell-group"),g=w("van-field"),H=w("van-action-sheet"),B=w("van-button"),N=w("van-dialog");return o(),m(M,null,[s("div",on,[s("div",un,[s("div",rn,[r(ln,{"dapp-list":He.value},null,8,["dapp-list"]),l(e).isConnectWallet?(o(),m("div",{key:0,class:"address",onClick:We},[ye(l(e).chainId)?(o(),$(c,{key:0,class:"chain-icon",round:"",src:l(be)(ye(l(e).chainId))},null,8,["src"])):(o(),$(k,{key:1,class:"chain-icon",name:"wallet"})),s("div",dn,a(l(pe)(l(e).walletAddress)),1)])):(o(),m("div",{key:1,class:"address",onClick:fe},[r(k,{name:"wallet"}),s("div",cn,a(t.$t("pleaseConnectWallet")),1)]))]),s("div",mn,[r(k,{name:"language",onClick:n[0]||(n[0]=i=>R.value=!0)}),r(k,{name:"help",onClick:n[1]||(n[1]=i=>A.value=!0)})])]),r(v,{inset:"",class:"form-item"},{default:y(()=>[s("div",pn,a(t.$t("token")),1),r(h,{"is-link":"",onClick:Ae,class:"token-cell"},et({value:y(()=>[s("div",fn,a(W.value?W.value:"--"),1)]),_:2},[l(e).token?{name:"title",fn:y(()=>[s("div",vn,[r(Te,{class:"token-icon",tokenIcon:l(e).token.icon,chainIcon:l(be)(l(e).token.chain)},null,8,["tokenIcon","chainIcon"]),L(" "+a(l(e).token.symbol),1)])]),key:"0"}:{name:"title",fn:y(()=>[s("div",{class:"token-box",style:{color:"#999999"}},a(t.$t("pleaseSelectToken")),1)]),key:"1"}]),1024)]),_:1}),s("div",yn,[s("div",hn,[s("div",null,[L(a(t.$t("receivingAddress"))+" ",1),r(k,{name:"info",onClick:n[2]||(n[2]=i=>ue.value=!0)})]),s("div",{onClick:Ne},[r(k,{name:"clear"}),L(" "+a(t.$t("clear")),1)])]),ne.value?(o(),$(g,{key:0,class:"ipt","model-value":l(e).addressText,onPasteCapture:Oe,type:"textarea",onBlurCapture:Pe,ref_key:"ipt",ref:ge},null,8,["model-value"])):(o(),m("ul",{key:1,class:"table",onClick:Re},[(o(!0),m(M,null,we(l(e).addressList,(i,j)=>(o(),m("li",null,[s("div",gn,a(j+1),1),s("div",_n,a(i),1),l(e).isCustomRule?(o(),m("div",{key:0,class:"edit",onClick:tt(q=>Be(i,j),["stop"])},[r(k,{name:"edit"})],8,kn)):D("",!0)]))),256))]))]),l(e).addressList.length>0?(o(),m(M,{key:0},[r(v,{inset:"",class:"form-item"},{default:y(()=>[r(g,{modelValue:l(ae),"onUpdate:modelValue":n[3]||(n[3]=i=>nt(ae)?ae.value=i:null),disabled:l(e).isCustomRule,"is-link":"",readonly:"",name:"picker",label:t.$t("distributionRules"),onClick:xe,"input-align":"right"},null,8,["modelValue","disabled","label"]),r(H,{show:oe.value,"onUpdate:show":n[4]||(n[4]=i=>oe.value=i),title:t.$t("distributionRules"),actions:l(Fe),"close-on-click-action":"",onSelect:Ee},null,8,["show","title","actions"])]),_:1}),r(v,{inset:"",class:"form-item"},{default:y(()=>[l(e).isCustomRule?(o(),$(g,{key:0,label:t.$t("totalQuantity"),"input-align":"right",readonly:"","model-value":l(V)},null,8,["label","model-value"])):l(e).currentSentRule.value==0?(o(),$(g,{key:1,label:t.$t("amountEach"),"input-align":"right",formatter:le,placeholder:t.$t("pleaseEnterSingleQuantity"),type:"number",modelValue:l(e).sentSingleAmountString,"onUpdate:modelValue":n[5]||(n[5]=i=>l(e).sentSingleAmountString=i)},null,8,["label","placeholder","modelValue"])):(o(),$(g,{key:2,label:t.$t("totalQuantity"),"input-align":"right",formatter:le,placeholder:t.$t("pleaseEnterTotalQuantity"),type:"number",modelValue:l(e).sentTotalAmountString,"onUpdate:modelValue":n[6]||(n[6]=i=>l(e).sentTotalAmountString=i)},null,8,["label","placeholder","modelValue"]))]),_:1})],64)):D("",!0),s("div",bn,[l(e).isConnectWallet?(o(),m(M,{key:0},[U.value?(o(),$(B,{key:0,class:"create-btn",type:"danger",onClick:Se},{default:y(()=>[L(a(t.$t("approve")),1)]),_:1})):(o(),$(B,{key:1,class:"create-btn",type:"primary",onClick:Me,loading:ie.value},{default:y(()=>[L(a(t.$t("oneClickTransfer")),1)]),_:1},8,["loading"]))],64)):(o(),$(B,{key:1,class:"create-btn",type:"primary",onClick:fe},{default:y(()=>[L(a(t.$t("connectWallet")),1)]),_:1}))]),s("div",{class:"form-item history",onClick:n[7]||(n[7]=i=>l(x).push("/history"))},a(t.$t("transferHistory")),1)]),r(H,{show:R.value,"onUpdate:show":n[8]||(n[8]=i=>R.value=i),title:t.$t("switchLang"),actions:l(ve),closeable:!1,"cancel-text":t.$t("cancel"),"close-on-click-action":"",onSelect:Ce},null,8,["show","title","actions","cancel-text"]),r(N,{class:"editAmountDialog",show:X.value,"onUpdate:show":n[10]||(n[10]=i=>X.value=i),title:t.$t("editQuantity"),"show-cancel-button":"",onConfirm:Ie},{default:y(()=>[s("div",$n,[r(g,{modelValue:Y.value,"onUpdate:modelValue":n[9]||(n[9]=i=>Y.value=i),type:"number",formatter:le,clearable:""},null,8,["modelValue"])])]),_:1},8,["show","title"]),r(Nt,{visable:p.value,"onUpdate:visable":n[11]||(n[11]=i=>p.value=i),detail:T.value,onConfirm:De},null,8,["visable","detail"]),r(N,{class:"help-dialog",show:A.value,"onUpdate:show":n[12]||(n[12]=i=>A.value=i),title:t.$t("ruleDescription"),"confirm-button-text":t.$t("understand"),"close-on-click-overlay":""},{default:y(()=>[s("div",wn,[s("div",null,a(t.$t("rulesDescription1")),1),s("div",null,a(t.$t("rulesDescription2")),1),s("div",null,a(t.$t("rulesDescription3")),1),s("div",null,a(t.$t("rulesDescription4",{chains:l(_e).join("/")})),1)])]),_:1},8,["show","title","confirm-button-text"]),r(N,{class:"create-transfer-dialog",show:S.value,"onUpdate:show":n[15]||(n[15]=i=>S.value=i),onClose:n[16]||(n[16]=i=>S.value=!1),"close-on-click-overlay":""},{footer:y(()=>[s("div",Bn,[r(B,{class:"copy-btn",type:"primary",onClick:n[14]||(n[14]=i=>S.value=!1)},{default:y(()=>[L(a(t.$t("understand")),1)]),_:1})])]),default:y(()=>[s("div",Tn,[b.value?(o(),m(M,{key:0},[s("div",Cn,[r(k,{name:"createSuccess"})]),s("div",Sn,a(t.$t("transferResultSuccess1")),1),s("div",{class:"text",onClick:n[13]||(n[13]=i=>Ge(P.value))},a(t.$t("transferResultSuccess2")),1)],64)):(o(),m(M,{key:1},[s("div",An,[r(k,{name:"infoFail"})]),s("div",Rn,a(t.$t("transferResultFail1")),1),s("div",Ln,a(t.$t("transferResultFail2")),1)],64))])]),_:1},8,["show"]),r(N,{class:"chain-err-dialog",confirmButtonText:t.$t("understand"),confirmButtonColor:"#3F80F7",show:G.value,"onUpdate:show":n[17]||(n[17]=i=>G.value=i)},{default:y(()=>[s("div",In,[s("div",null,a(t.$t("notSupportedChain")),1),s("div",null,a(t.$t("pleaseSwitchTo",{chains:l(_e).join("\u3001")})),1)])]),_:1},8,["confirmButtonText","show"]),r(N,{class:"copy-address-dialog",confirmButtonText:t.$t("understand"),confirmButtonColor:"#3F80F7",show:ue.value,"onUpdate:show":n[18]||(n[18]=i=>ue.value=i)},{default:y(()=>[s("div",Fn,a(t.$t("copyAddress")),1),s("div",xn,[s("div",null,a(t.$t("copyAddressTips")),1)])]),_:1},8,["confirmButtonText","show"]),r(jt,{tradeVisable:E.value,"onUpdate:tradeVisable":n[19]||(n[19]=i=>E.value=i),status:O.value,tradeHash:P.value,message:Q.value},null,8,["tradeVisable","status","tradeHash","message"])],64)}}},Dn=ee(En,[["__scopeId","data-v-eb40fd6b"]]);export{Dn as default};
